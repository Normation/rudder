# generated by rudder-lang
# @name NTP Technique
# @description Configure the NTP
# @version 1.1

bundle agent NTP_Technique_technique
{
  vars:
    "resources_dir" string => "${this.promise_dirname}/resources";
  methods:
    "Package install_${report_data.directive_id}_0" usebundle => _method_reporting_context("Package install", "ntp");
    "Package install_${report_data.directive_id}_0" usebundle => package_install("ntp");
    "File ensure lines present_${report_data.directive_id}_1" usebundle => _method_reporting_context("File ensure lines present", "/etc/ntp.conf");
    "File ensure lines present_${report_data.directive_id}_1" usebundle => file_ensure_lines_present("/etc/ntp.conf", "server pool.ntp.org");
    "Service restart_${report_data.directive_id}_2" usebundle => _method_reporting_context("Service restart", "ntp"),
                                                           if => concat("file_ensure_lines_present__etc_ntp_conf1_outcome_repaired");
    "Service restart_${report_data.directive_id}_2" usebundle => service_restart("ntp"),
                                                           if => concat("file_ensure_lines_present__etc_ntp_conf1_outcome_repaired");
}
