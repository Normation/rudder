<lift:surround with="menu/menu-administration" at="content">

<head>
<title>Rudder - Policy Server Management</title>
<style>
<!--
  .archiveAction {
    display: inline-block;
  }
  
  .archiveAction .ui-button {
    width: 180px;
  }
  
  .deca select {
    width: 180px;
  }
  
  #exportAllButton, #exportGroupLibraryButton, #exportRulesButton, #exportDirectiveLibraryButton {
    margin-bottom: 10px;
  }
  
-->
</style>

<script>
//<![CDATA[
  function enableIfNonEmpty(selectId, buttonId) { 
    $("#"+selectId).change(function () {
      $("#" + selectId + " option:selected").each(function () {
        if($(this).text() != "Choose an archive to restore...") {
          $("#"+buttonId).prop("disabled", false);
          $("#"+buttonId).removeClass("ui-button-disabled ui-state-disabled");
          $("#"+buttonId).addClass("ui-state-default");
        } else {
          $("#"+buttonId).prop("disabled", true);
          $("#"+buttonId).addClass("ui-button-disabled ui-state-disabled");
          $("#"+buttonId).removeClass("ui-state-default");
        }
      })
    })
  }
//]]>  
</script>

</head>
<div class="portlet">
  <div class="portlet-header">Archive management</div>
  <div class="portlet-content">
    <div class="intro">
      <div>Archive or restore settings (Groups, Rules, Directives and active Techniques) from Rudder to backup, restore or transfer items between Rudder instances.</div>
    </div>

    <div class="inner-portlet">
      <div class="inner-portlet-header">Global archive</div>
      <div class="portlet-content">
        <div class="intro">
          <div>Archive or restore everything (Groups, Rules and the Directive library).</div>
        </div>

        <hr class="spacer" />

        <div class="deca">
          <span
            class="lift:administration.Archives.allForm archiveAction"
            id="allForm">
            <form class="lift:form.ajax">
              <input id="exportAllButton" type="submit"
                value="[Export ALL]" />
              <br/>
              <select
                id="importAllSelect">
                <option>2011-10-08 21:21:21</option>
                <option>2011-10-09 21:21:21</option>
                <option>2011-10-10 21:21:21</option>
                <option>2011-10-11 21:21:21</option>
              </select> <input id="importAllButton" type="submit"
                value="[Importt ALL]" /> <input id="downloadAllButton"
                type="submit" value="[Download ALL]" /> <br />
              <lift:msg id="allFormNotice" errorClass="error">[error]</lift:msg>
            </form>
          </span>
        </div>
      </div>
    </div>

    <div class="inner-portlet">
      <div class="inner-portlet-header">Archive groups</div>
      <div class="portlet-content">

        <div class="intro">
          <div>Archive or restore Groups only.</div>
        </div>

        <hr class="spacer" />
        <div class="deca">
          <div
            class="lift:administration.Archives.groupLibraryForm archiveAction"
            id="groupLibraryForm">
            <form class="lift:form.ajax">
              <input id="exportGroupLibraryButton"
                type="submit" value="[Export GroupLibrary]" /> 
                <br/>
                <select id="importGroupLibrarySelect">
                <option>2011-10-08 21:21:21</option>
                <option>2011-10-09 21:21:21</option>
                <option>2011-10-10 21:21:21</option>
                <option>2011-10-11 21:21:21</option>
              </select> <input id="importGroupLibraryButton" type="submit"
                value="[Import GroupLibrary]" /> <input
                id="downloadGroupLibraryButton" type="submit"
                value="[Download GroupLibrary]" /> <br />
              <lift:msg id="groupLibraryFormNotice" errorClass="error">[error]</lift:msg>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="inner-portlet">
      <div class="inner-portlet-header">Archive Rules</div>
      <div class="portlet-content">

        <div class="intro">
          <div>Archive or restore Rules only.</div>
        </div>

        <hr class="spacer" />
        <div class="deca">

          <div
            class="lift:administration.Archives.rulesForm archiveAction"
            id="rulesForm">
            <form class="lift:form.ajax">
             <input id="exportRulesButton" type="submit"
                value="[Export CR]" /> 
              <br/>
              <select
                id="importRulesSelect">
                <option>2011-10-08 21:21:21</option>
                <option>2011-10-09 21:21:21</option>
                <option>2011-10-10 21:21:21</option>
                <option>2011-10-11 21:21:21</option>
              </select> <input id="importRulesButton" type="submit"
                value="[Import Rules]" /> <input
                id="downloadRulesButton" type="submit"
                value="[Download Rules]" /> <br />
              <lift:msg id="rulesFormNotice" errorClass="error">[error]</lift:msg>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="inner-portlet">
      <div class="inner-portlet-header">Archive Directives and active Techniques</div>
      <div class="portlet-content">

        <div class="intro">
          <div>Archive or restore Directives and active Techniques only.</div>
        </div>

        <hr class="spacer" />
        <div class="deca">
          <div
            class="lift:administration.Archives.directiveLibraryForm archiveAction"
            id="directiveLibraryForm">
            <form class="lift:form.ajax">
              <input id="exportDirectiveLibraryButton"
                type="submit" value="[Export DirectiveLibrary]" />
              <br/>
              <select id="importDirectiveLibrarySelect">
                <option>2011-10-08 21:21:21</option>
                <option>2011-10-09 21:21:21</option>
                <option>2011-10-10 21:21:21</option>
                <option>2011-10-11 21:21:21</option>
              </select> <input id="importDirectiveLibraryButton" type="submit"
                value="[Import DirectiveLibrary]" /> <input
                id="downloadDirectiveLibraryButton" type="submit"
                value="[Download DirectiveLibrary]" /> <br />
              <lift:msg id="directiveLibraryFormNotice"
                errorClass="error">[error]</lift:msg>
            </form>
          </div>
        </div>
      </div>
    </div>
    
  </div>
</div>


</lift:surround>

