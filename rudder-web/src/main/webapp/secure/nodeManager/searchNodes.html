<lift:surround with="common-layout" at="content">

<head>
    <title>Rudder - Search Nodes</title>
    <script type="text/javascript" src="/javascript/rudder/angular/auditMode.js"></script>
</head>

<div class="portlet">
  <div class="portlet-header page-title">Nodes</div>
  <div class="portlet-content">
    <div class="intro">
      <div>
        Make a query base search and display node details
      </div>
    </div>
    <div data-lift="node.SearchNodes.head"></div>
    <div class="inner-portlet">
      <div class="inner-portlet-content">
        <hr class="spacer"/>
        <div id="serverDetails" ></div>
      </div>
    </div>

    <div class="inner-portlet">
      <div id="querySearchSection" onclick="$('#query-search-content').toggle(400);$('#querySearchSection').toggleClass('unfoldedSectionQuery');" class="inner-portlet-header">
          Query based search
      </div>
      <div id="query-search-content" style="display:none;">
        <div class="intro">
          <div>
            Find nodes in your Rudder infrastructure that match different criteria.<br />
            Define <a href="/secure/nodeManager/groups">node groups</a> from your search results.
          </div>
        </div>

        <div class="inner-portlet-content" style="overflow:auto;">
          <div id="SearchNodes">
            <div data-lift="node.SearchNodes.showQuery"></div>
          </div>
          <lift:authz role="group_write">
          <div class="tw-bs">
            <div data-lift="node.SearchNodes.createGroup"></div>
          </div>
          </lift:authz>
        </div>
      </div>
      <br/>
    </div>
  </div>
</div>

<div class="tw-bs">
    <div id="createGroupPopup" class="modal fade">
    <lift:ignore>
      This div gets the content of the createCategoryOrGroup injected within
    </lift:ignore>
    <div id="createGroupContainer">
    </div>
    </div>
</div>
</lift:surround>
