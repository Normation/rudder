<node-state>
<div class="inner-portlet" id="nodeState">
  <h3 class="page-title">Node state</h3>
  <div class="portlet-content" id="nodeStateController">
    <div class="explanation-text">
      <div>
        <p>A node has a state, which may be used to classify it (in search and groups).
           Some states have also an impact on the node's behavior in Rudder.</p>
        <p>By default, a node is in <b>Enabled</b> state.</p>
        <p>Available states are:</p>
        <ol>
          <li><b>Enabled</b>: this is the default state for a node. Rudder generates policies for that node based on rules and groups.
              The node is expected to report on these policies on each run, according to its policy mode, agent run schedule, and compliance mode.</li>
          <li><b>Initializing</b>: this state is equivalent to <b>Enabled</b> state but may be used to create specific rules and groups for new nodes.</li>
          <li><b>Preparing End Of Life</b>: this state is equivalent to <b>Enabled</b> state but may be used to create specific rules and groups for EOL nodes.</li>
          <li><b>Ignored</b>: Rudder ignores nodes in this state. No policy are generated for them, and they are excluded from compliance reporting. The agent
              for a node on that state doesn't get new policies, but it continues to run with existing policies. This state is typically used for a temporarily shutdowned
              machine, or for a node for which the policy generation is broken for some reason and can't fixed for now.</li>
          <li><b>Empty policies</b>: When policies are generated, Rudder removes all non-system policies for nodes in this state. The agent continues to
              run, but only with system policies. By consequence, the node is excluded from all non-system policy compliance computation. This state
              is perfect for a node which should not be managed by Rudder for some time, while preserving the ability to reenable it without local actions.</li>
        </ol>
      </div>
    </div>

    <div class="col-xs-12">
      <form role="form" class="lift:form.ajax?class=form-horizontal%20rudder-form%20no-shadow">
        <lift:authz role="administration_write">
          <div class="globalConf form-group">
            <select class="form-control input-sm" id="nodeStateSelect"></select>
          </div>
          <div class="form-group node-submit">
            <button type="submit" class="btn btn-success" id="nodeStateSubmit">Save changes</button>
          </div>
        </lift:authz>
        <div class="currentNodeState form-group">
          <label>Current state: </label> <span id="currentNodeState"></div>
        </div>
        <div id="nodeStateMessage" class="col-xs-12">
          <span class="lift:Msg?nodeStateMessage">[messages]</span>
        </div>
      </form>
    </div>
  </div>
</div>
</node-state>
