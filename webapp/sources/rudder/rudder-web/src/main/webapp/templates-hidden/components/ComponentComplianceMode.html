<property-compliancemode>

<div  id="complianceMode">
  <div class="inner-portlet"  id="complianceModeController" ng-controller="complianceModeController">
  <h3 class="page-title"  ng-hide="isNodePage">Reporting mode</h3>
  <div class="portlet-content">
    <div ng-hide="isNodePage">
      <div class="explanation-text">
        This setting affects the reports sent from each agent to this central server.
        <ul>
          <li>
            In <b>Full compliance</b> mode, a report will be sent for each configuration component that is checked, even if no
            changes were necessary (these are known as 'success' reports). This mode is much more verbose, in terms of logs and
            network traffic, but provides more precise reporting and may be necessary to prove compliance in your organization.
          </li>
          <li>
            In <b>Non compliant only</b> mode, reports will only be sent when the agent makes a change or an error occurs on a node
            (these are 'repair' or 'error' reports). This mode saves a lot of log space and bandwidth, but leads to some assumptions
            about actual configuration status in reporting.
          </li>
          <li>
            In <b>Disabled</b> mode, no reports will be sent, and rudder-agent will not re-configure the local syslog to send reports.
            This mode uses no log space or bandwidth, but will also not allow you to check if your configuration policy
            is successfully applied. We do not recommend using this mode except for setups where you have another
            feedback mechanism in place.
          </li>
        </ul>
      </div>

      <div class="col-lg-12 callout-fade callout-warning" ng-if="disabledChangeOnly">
        <div class="marker">
          <span class="glyphicon glyphicon-info-sign"></span>
        </div>
        'Non compliant reports only' mode is disabled if https reporting protocol is enabled
      </div>
    </div>
    <form role="form" name="complianceModeForm" class="form-horizontal" >

      <div ng-hide="isNodePage" class="compliance-form">
        <ul>
          <li class="rudder-form">
            <div class="input-group">
              <label class="input-group-addon" for="fullcompliance">
                <input type="radio" ng-model="complianceMode.name" value="full-compliance" id="fullcompliance"/>
                <label for="fullcompliance" class="label-radio">
                  <span class="ion ion-record"></span>
                </label>
                <span class="ion ion-checkmark-round check-icon"></span>
              </label>
              <label class="form-control" for="fullcompliance">
                Full compliance
              </label>
            </div>
          </li>
          <li class="rudder-form">
            <div class="input-group">
              <label class="input-group-addon" for="noncompliant">
                <input type="radio" ng-model="complianceMode.name" value="changes-only" id="noncompliant"/>
                <label for="noncompliant" class="label-radio">
                  <span class="ion ion-record"></span>
                </label>
                <span class="ion ion-checkmark-round check-icon"></span>
              </label>
              <label class="form-control" for="noncompliant">
                Non compliant only
              </label>
            </div>
          </li>
          <li class="rudder-form">
            <div class="input-group">
              <label class="input-group-addon" for="disabledCompliance">
                <input type="radio" ng-model="complianceMode.name"  value="reports-disabled" id="disabledCompliance"/>
                <label for="disabledCompliance" class="label-radio">
                  <span class="ion ion-record"></span>
                </label>
                <span class="ion ion-checkmark-round check-icon"></span>
              </label>
              <label class="form-control" for="disabledCompliance">
                Disabled
              </label>
            </div>
          </li>
        </ul>
      </div>
      <lift:authz role="administration_write">
        <div ng-hide="isNodePage">
          <button type="submit" class="btn btn-success" ng-click="save()" ng-disabled="complianceModeForm.$invalid || isUnchanged()" id="complianceModeSubmit">Save changes</button>
        </div>
      </lift:authz>
    </form>
  </div>
  </div>
</div>
</property-compliancemode>
